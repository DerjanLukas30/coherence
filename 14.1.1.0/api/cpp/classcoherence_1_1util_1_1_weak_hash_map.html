<!--
  Copyright (c) 2000, 2020, Oracle and/or its affiliates.

  Licensed under the Universal Permissive License v 1.0 as shown at
  http://oss.oracle.com/licenses/upl.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>C++ API Reference for Oracle&amp;reg; Coherence Community Edition: WeakHashMap Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<b>C++ API Reference for Oracle&reg; Coherence Community Edition<br>(14.1.1.0.1)</b><br>F23533-01
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li class="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="namespacecoherence.html">coherence</a>::<a class="el" href="namespacecoherence_1_1util.html">util</a>::<a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html">WeakHashMap</a></div>
<h1>WeakHashMap Class Reference</h1><!-- doxytag: class="coherence::util::WeakHashMap" --><!-- doxytag: inherits="coherence::util::SafeHashMap" --><code>#include &lt;<a class="el" href="_weak_hash_map_8hpp-source.html">coherence/util/WeakHashMap.hpp</a>&gt;</code>
<p>
Inherits <a class="el" href="classcoherence_1_1util_1_1_safe_hash_map.html">SafeHashMap</a>.
<p>

<p>
<a href="classcoherence_1_1util_1_1_weak_hash_map-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html" title="WeakHashMap is a HashMap implementation based on weak keys.">WeakHashMap</a> is a HashMap implementation based on weak keys. 
<p>
That is the use an object as a key in the map will not prevent it from being destroyed if all other non-weak references to it are released.<p>
The time at which the entry associated with the weak key is cleaned up is not guaranteed, it may live in the map for some time. While it is not safe to assume that the map will shrink to its absolute minimum at any point, it is safe to assume that given constant random key insertions the size of the map will initially grow and then stabilize as the keys are reclaimed.<p>
Note: Iterating the entries may yield entries with reclaimed (NULL) keys.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>mf 2008.05.27 </dd></dl>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5b310f5b3b4a79c7cde67e22f5bfd543"></a><!-- doxytag: member="coherence::util::WeakHashMap::Handle" ref="5b310f5b3b4a79c7cde67e22f5bfd543" args="" -->
typedef spec::Handle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#5b310f5b3b4a79c7cde67e22f5bfd543">Handle</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html" title="WeakHashMap is a HashMap implementation based on weak keys.">WeakHashMap</a> Handle definition. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9dff753690c2fde7f2096982681b2fe3"></a><!-- doxytag: member="coherence::util::WeakHashMap::View" ref="9dff753690c2fde7f2096982681b2fe3" args="" -->
typedef spec::View&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#9dff753690c2fde7f2096982681b2fe3">View</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html" title="WeakHashMap is a HashMap implementation based on weak keys.">WeakHashMap</a> View definition. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f6b6cf6ce7af189584f0d92db3187844"></a><!-- doxytag: member="coherence::util::WeakHashMap::Holder" ref="f6b6cf6ce7af189584f0d92db3187844" args="" -->
typedef spec::Holder&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#f6b6cf6ce7af189584f0d92db3187844">Holder</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html" title="WeakHashMap is a HashMap implementation based on weak keys.">WeakHashMap</a> Holder definition. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c4f251fc3ee416ede2d031fd8517411c"></a><!-- doxytag: member="coherence::util::WeakHashMap::compact" ref="c4f251fc3ee416ede2d031fd8517411c" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#c4f251fc3ee416ede2d031fd8517411c">compact</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleanup any "garbage" entries in the map. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#4f9e6f1974dfb93bb2c4efe9d9f2a337">WeakHashMap</a> (size32_t cInitialBuckets=17, float32_t flLoadFactor=1.0F, float32_t flGrowthRate=3.0F)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct a thread-safe weak hash map using the specified settings.  <a href="#4f9e6f1974dfb93bb2c4efe9d9f2a337"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f52afd946d49f01f9938a08e47bb0fd0"></a><!-- doxytag: member="coherence::util::WeakHashMap::WeakHashMap" ref="f52afd946d49f01f9938a08e47bb0fd0" args="(const WeakHashMap &amp;that)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#f52afd946d49f01f9938a08e47bb0fd0">WeakHashMap</a> (const <a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html">WeakHashMap</a> &amp;that)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy constructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="53235592ccad37489c635d757a340f93"></a><!-- doxytag: member="coherence::util::WeakHashMap::instantiateEntry" ref="53235592ccad37489c635d757a340f93" args="(Object::View vKey, Object::Holder ohValue, size32_t nHash)" -->
virtual <br>
<a class="el" href="classcoherence_1_1util_1_1_map_1_1_entry.html#5b310f5b3b4a79c7cde67e22f5bfd543">SafeHashMap::Entry::Handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#53235592ccad37489c635d757a340f93">instantiateEntry</a> (<a class="el" href="classcoherence_1_1lang_1_1_object.html#9dff753690c2fde7f2096982681b2fe3">Object::View</a> vKey, <a class="el" href="classcoherence_1_1lang_1_1_object.html#f6b6cf6ce7af189584f0d92db3187844">Object::Holder</a> ohValue, size32_t nHash)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Factory pattern, initialized with the specified valued.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vKey</em>&nbsp;</td><td>the associated key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ohValue</em>&nbsp;</td><td>the assocaited value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nHash</em>&nbsp;</td><td>the associated hash code</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a new instance of the <a class="el" href="classcoherence_1_1util_1_1_safe_hash_map_1_1_entry.html" title="A map entry (key-value pair).">Entry</a> class (or a subclass thereof)</dd></dl>
 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0bff83e7c46e70cfa3ce6f7dbc807cfe"></a><!-- doxytag: member="coherence::util::WeakHashMap::instantiateEntry" ref="0bff83e7c46e70cfa3ce6f7dbc807cfe" args="(SafeHashMap::Entry::View vThat)" -->
virtual <br>
<a class="el" href="classcoherence_1_1util_1_1_map_1_1_entry.html#5b310f5b3b4a79c7cde67e22f5bfd543">SafeHashMap::Entry::Handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#0bff83e7c46e70cfa3ce6f7dbc807cfe">instantiateEntry</a> (<a class="el" href="classcoherence_1_1util_1_1_map_1_1_entry.html#9dff753690c2fde7f2096982681b2fe3">SafeHashMap::Entry::View</a> vThat)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Factory pattern, instantiate an <a class="el" href="classcoherence_1_1util_1_1_safe_hash_map_1_1_entry.html" title="A map entry (key-value pair).">Entry</a> that is either a deep or shalow copy.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vEntry</em>&nbsp;</td><td>the <a class="el" href="classcoherence_1_1util_1_1_safe_hash_map_1_1_entry.html" title="A map entry (key-value pair).">Entry</a> to copy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fDeep</em>&nbsp;</td><td>whether to make a deep copy of the <a class="el" href="classcoherence_1_1util_1_1_safe_hash_map_1_1_entry.html" title="A map entry (key-value pair).">Entry</a> or not</td></tr>
  </table>
</dl>
 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="90e9d17393f9216daa988935574aff21"></a><!-- doxytag: member="coherence::util::WeakHashMap::grow" ref="90e9d17393f9216daa988935574aff21" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#90e9d17393f9216daa988935574aff21">grow</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resize the bucket array, rehashing all Entries. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual size32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html#9b024b6a374fa80728e879b9fe74836b">shrink</a> (size32_t iBucket, size32_t cEntries)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shrink the specified bucket.  <a href="#9b024b6a374fa80728e879b9fe74836b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map_1_1_entry.html">Entry</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A map entry (key-value pair).  <a href="classcoherence_1_1util_1_1_weak_hash_map_1_1_entry.html#_details">More...</a><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="4f9e6f1974dfb93bb2c4efe9d9f2a337"></a><!-- doxytag: member="coherence::util::WeakHashMap::WeakHashMap" ref="4f9e6f1974dfb93bb2c4efe9d9f2a337" args="(size32_t cInitialBuckets=17, float32_t flLoadFactor=1.0F, float32_t flGrowthRate=3.0F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoherence_1_1util_1_1_weak_hash_map.html">WeakHashMap</a>           </td>
          <td>(</td>
          <td class="paramtype">size32_t&nbsp;</td>
          <td class="paramname"> <em>cInitialBuckets</em> = <code>17</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float32_t&nbsp;</td>
          <td class="paramname"> <em>flLoadFactor</em> = <code>1.0F</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float32_t&nbsp;</td>
          <td class="paramname"> <em>flGrowthRate</em> = <code>3.0F</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a thread-safe weak hash map using the specified settings. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cInitialBuckets</em>&nbsp;</td><td>the initial number of hash buckets, 0 &lt; n </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flLoadFactor</em>&nbsp;</td><td>the acceptable load factor before resizing occurs, 0 &lt; n, such that a load factor of 1.0 causes resizing when the number of entries exceeds the number of buckets </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flGrowthRate</em>&nbsp;</td><td>the rate of bucket growth when a resize occurs, 0 &lt; n, such that a growth rate of 1.0 will double the number of buckets: bucketcount = bucketcount * (1 + growthrate) </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="9b024b6a374fa80728e879b9fe74836b"></a><!-- doxytag: member="coherence::util::WeakHashMap::shrink" ref="9b024b6a374fa80728e879b9fe74836b" args="(size32_t iBucket, size32_t cEntries)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual size32_t shrink           </td>
          <td>(</td>
          <td class="paramtype">size32_t&nbsp;</td>
          <td class="paramname"> <em>iBucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size32_t&nbsp;</td>
          <td class="paramname"> <em>cEntries</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Shrink the specified bucket. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iBucket</em>&nbsp;</td><td>the bucket to shrink </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cEntries</em>&nbsp;</td><td>the maximum number of entries to shrink by</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of entries removed </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>coherence/util/<a class="el" href="_weak_hash_map_8hpp-source.html">WeakHashMap.hpp</a></ul>
<center>
  Copyright &copy; 2000, 2020, Oracle and/or its affiliates.
  Licensed under the Universal Permissive License v 1.0 as shown at
  http://oss.oracle.com/licenses/upl.
</center>
</BODY>
</HTML>
